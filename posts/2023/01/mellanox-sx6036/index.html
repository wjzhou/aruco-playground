<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>Mellanox SX6036 | wjzhou's Personal Blog</title><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=description content="The Mellanox SX6036 is a 36 ports switch that support both infinitband and price is very good on ebay. (I bought mine at $200 + $50 for the ethernet activation)
Manual: https://delivery04.dhe.ibm.com/sar/CMA/XSA/MLNX-OS_VPI_v3_4_3002_UM.pdf
reset the device in case the previous password is still there Press the RST key and wait. (Note, it takes almost 3 minutes to reset mine instead of 15s as memtioned in the manual). After the reset, the password would be admin/admin."><meta name=generator content="Hugo 0.109.0"><meta name=robots content="noindex, nofollow"><link rel=stylesheet href=/ananke/css/main.min.css><meta property="og:title" content="Mellanox SX6036"><meta property="og:description" content="The Mellanox SX6036 is a 36 ports switch that support both infinitband and price is very good on ebay. (I bought mine at $200 + $50 for the ethernet activation)
Manual: https://delivery04.dhe.ibm.com/sar/CMA/XSA/MLNX-OS_VPI_v3_4_3002_UM.pdf
reset the device in case the previous password is still there Press the RST key and wait. (Note, it takes almost 3 minutes to reset mine instead of 15s as memtioned in the manual). After the reset, the password would be admin/admin."><meta property="og:type" content="article"><meta property="og:url" content="https://blog.ellieiris.com/posts/2023/01/mellanox-sx6036/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-01-02T16:04:12-05:00"><meta property="article:modified_time" content="2023-01-02T16:04:12-05:00"><meta itemprop=name content="Mellanox SX6036"><meta itemprop=description content="The Mellanox SX6036 is a 36 ports switch that support both infinitband and price is very good on ebay. (I bought mine at $200 + $50 for the ethernet activation)
Manual: https://delivery04.dhe.ibm.com/sar/CMA/XSA/MLNX-OS_VPI_v3_4_3002_UM.pdf
reset the device in case the previous password is still there Press the RST key and wait. (Note, it takes almost 3 minutes to reset mine instead of 15s as memtioned in the manual). After the reset, the password would be admin/admin."><meta itemprop=datePublished content="2023-01-02T16:04:12-05:00"><meta itemprop=dateModified content="2023-01-02T16:04:12-05:00"><meta itemprop=wordCount content="615"><meta itemprop=keywords content="rdma,ethernet,"><meta name=twitter:card content="summary"><meta name=twitter:title content="Mellanox SX6036"><meta name=twitter:description content="The Mellanox SX6036 is a 36 ports switch that support both infinitband and price is very good on ebay. (I bought mine at $200 + $50 for the ethernet activation)
Manual: https://delivery04.dhe.ibm.com/sar/CMA/XSA/MLNX-OS_VPI_v3_4_3002_UM.pdf
reset the device in case the previous password is still there Press the RST key and wait. (Note, it takes almost 3 minutes to reset mine instead of 15s as memtioned in the manual). After the reset, the password would be admin/admin."></head><body class="ma0 avenir bg-near-white"><header><div class=bg-black><nav class="pv3 ph3 ph4-ns" role=navigation><div class="flex-l justify-between items-center center"><a href=/ class="f3 fw2 hover-white no-underline white-90 dib">wjzhou's Personal Blog</a><div class="flex-l items-center"><div class=ananke-socials></div></div></div></nav></div></header><main class=pb7 role=main><article class="flex-l flex-wrap justify-between mw8 center ph3"><header class="mt4 w-100"><aside class="instapaper_ignoref b helvetica tracked">POSTS</aside><div id=sharing class="mt3 ananke-socials"></div><h1 class="f1 athelas mt3 mb1">Mellanox SX6036</h1><time class="f6 mv4 dib tracked" datetime=2023-01-02T16:04:12-05:00>January 2, 2023</time></header><div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><p>The Mellanox SX6036 is a 36 ports switch that support both infinitband and price is very good on ebay. (I bought mine at $200 + $50 for the ethernet activation)</p><p>Manual: <a href=https://delivery04.dhe.ibm.com/sar/CMA/XSA/MLNX-OS_VPI_v3_4_3002_UM.pdf>https://delivery04.dhe.ibm.com/sar/CMA/XSA/MLNX-OS_VPI_v3_4_3002_UM.pdf</a></p><h1 id=reset-the-device-in-case-the-previous-password-is-still-there>reset the device in case the previous password is still there</h1><p>Press the RST key and wait. (Note, it takes almost 3 minutes to reset mine instead of 15s as memtioned in the manual). After the reset, the password
would be <code>admin/admin</code>.</p><h1 id=enter-the-configure-mode>enter the configure mode</h1><p>When system start, the cli is in Standard mode, need to enter the configure mode to make any changes.</p><ul><li><code>enable</code> to enter Enable mode. (the prompt would change from <code>></code> to <code>#</code>)</li><li><code>configure terminal</code>to enter Config mode. (the prompt would change from <code>#</code> to <code>(config) #</code>)</li></ul><p>E.g.</p><pre tabindex=0><code>Mellanox Switch

switch-e1be2c [standalone: master] &gt; enable
switch-e1be2c [standalone: master] # configure terminal
switch-e1be2c [standalone: master] (config) #
</code></pre><h1 id=save-the-configureration>save the configureration</h1><pre tabindex=0><code>switch-e1be2c [standalone: master] (config) # write memory
</code></pre><h1 id=switch-port-mode-between-ibeth>switch port mode between ib/eth</h1><h2 id=show-port-types>show port types</h2><pre tabindex=0><code>switch-e1be2c [standalone: master] (config) #  show ports type
Ethernet:   1/1 1/2 1/3 1/4 1/5 1/6 1/7 1/8 1/9 1/10 1/11 1/12 1/13 1/14 1/15 1/16 1/17 1/18 
InfiniBand: 1/19 1/20 1/21 1/22 1/23 1/24 1/25 1/26 1/27 1/28 1/29 1/30 1/31 1/32 1/33 1/34 1/35 1/36 
</code></pre><h2 id=shutdown-ports>shutdown ports</h2><p>For this demo, the port 1-16 were in ethernet mode and 17-36 were in ib mode.</p><p>Please adjust the command based on your current configureation</p><pre tabindex=0><code>switch-e1be2c [standalone: master] (config) # interface ethernet 1/1-1/18 shutdown
switch-e1be2c [standalone: master] (config) # interface ib 1/19-1/36 shutdown
</code></pre><h2 id=switch-the-port-type>switch the port type</h2><pre tabindex=0><code>switch-e1be2c [standalone: master] (config) # port 1/1-1/18 type infiniband force
switch-e1be2c [standalone: master] (config) # port 1/19-1/36 type ethernet force
</code></pre><h2 id=no-shutdown-the-ports>no shutdown the ports</h2><pre tabindex=0><code># for some reason, on my switch, directly calling the following doesn&#39;t work for ib
# interface ib 1/1-1/18 no shutdown
switch-e1be2c [standalone: master] (config) # interface ib 1/1-1/18
switch-e1be2c [standalone: master] (config interface ib 1/1-1/18) # no shutdown
switch-e1be2c [standalone: master] (config interface ib 1/1-1/18) # exit
switch-e1be2c [standalone: master] (config) # interface ethernet 1/19-1/36 no shutdown
</code></pre><h2 id=set-port-speed-and-mtu>set port speed and mtu</h2><h3 id=ethernet>ethernet</h3><pre tabindex=0><code>switch-e1be2c [standalone: master] (config) # interface ethernet 1/19-1/36
switch-e1be2c [standalone: master] (config interface ethernet 1/19-1/36) # shutdown
switch-e1be2c [standalone: master] (config interface ethernet 1/19-1/36) # speed 56000
switch-e1be2c [standalone: master] (config interface ethernet 1/19-1/36) # mtu 9000
switch-e1be2c [standalone: master] (config interface ethernet 1/19-1/36) # no shutdown
switch-e1be2c [standalone: master] (config interface ethernet 1/19-1/36) # exit
</code></pre><h3 id=infiniband>infiniband</h3><pre tabindex=0><code>
switch-e1be2c [standalone: master] (config) # interface ib 1/1-1/18
switch-e1be2c [standalone: master] (config interface ib 1/1-1/18) # shutdown
# from manual: If the other side of the link is a SwitchX® or ConnectX®-3 device, to allow the link to
# raise in FDR speed, QDR speed must also be allowed
switch-e1be2c [standalone: master] (config interface ib 1/1-1/18) # speed qdr fdr
switch-e1be2c [standalone: master] (config interface ib 1/1-1/18) # no shutdown
switch-e1be2c [standalone: master] (config interface ib 1/1-1/18) # exit
</code></pre><h1 id=fan-setting>fan setting</h1><p>By default, the fan is too noisy in my place, the following will change the speed of the fan, please monitor the temp after changing anything.</p><h2 id=show-fan-speed>show fan speed</h2><pre tabindex=0><code>switch-e1be2c [standalone: master] (config) # show fan
=====================================================
Module          Device          Fan  Speed     Status
                                     (RPM)           
=====================================================
FAN             FAN             F1   4920.00   OK
FAN             FAN             F2   4920.00   OK
FAN             FAN             F3   4920.00   OK
FAN             FAN             F4   4860.00   OK
PS1             FAN             F1   4050.00   OK
PS2             FAN             -    -         NOT PRESENT
</code></pre><h2 id=set-spped-of-fan>set spped of fan</h2><pre tabindex=0><code>switch-e1be2c [standalone: master] (config) # fae mlxi2c set_fan /FAN/FAN 1 18
switch-e1be2c [standalone: master] (config) # fae mlxi2c set_fan /PS1/FAN 1 14
</code></pre><p>Note: it seems set /FAN/FAN 1 would set all 4 FANs. Also, do not set the value too low, when the temp is higher than a threshold, the fan will speed up.</p><ul class=pa0><li class="list di"><a href=/tags/rdma/ class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">rdma</a></li><li class="list di"><a href=/tags/ethernet/ class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">ethernet</a></li></ul><div class="mt6 instapaper_ignoref"></div></div><aside class="w-30-l mt6-l"><div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links"><p class="f5 b mb3">Related</p><ul class="pa0 list"><li class=mb2><a href=/posts/2023/01/mellanox-mcx314a-bcct-flash-mcx354a-fcct/>Mellanox Mcx314a Bcct Flash Mcx354a Fcct</a></li></ul></div></aside></article></main><footer class="bg-black bottom-0 w-100 pa3" role=contentinfo><div class="flex justify-between"><a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href=https://blog.ellieiris.com/>&copy; wjzhou's Personal Blog 2023</a><div><div class=ananke-socials></div></div></div></footer></body></html>